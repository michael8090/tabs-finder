/**
 * Created by yong on 3/9/16.
 */
// import './index.scss';
require('./index.scss');
function get(url, onSuccess, onFail) {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.onload = () => {
        if (xhr.status === 200) {
            onSuccess(xhr.response);
        } else {
            onFail(xhr.status);
        }
    };
    xhr.send();
}
function renderResult(images) {
    const resultPanel = document.querySelector('#result');
    resultPanel.innerHTML = images.reduce((html, image) => html + `<img src="${image.link}">`, '');
}
window.onload = () => {
    const input = document.querySelector('input');
    document.querySelector('form').addEventListener('submit', (e) => {
        e.preventDefault();
        const key = input.value;
        if (key) {
            get(`/api/search?key=${encodeURIComponent(key)}`, (res) => renderResult(JSON.parse(res.body).items));
            // const debugData = [{"kind":"customsearch#result","title":"è®¸å·æ•…ä¹¡å‰ä»–è°±ã€é«˜æ¸…ç‰ˆã€‘_å›¾ç‰‡è°±-17å‰ä»–ç½‘","htmlTitle":"è®¸å·<b>æ•…ä¹¡</b>å‰ä»–è°±ã€é«˜æ¸…ç‰ˆã€‘_å›¾ç‰‡è°±-17å‰ä»–ç½‘","link":"http://www.17jita.com/uploads/allimg/131201/1-131201134F1.png","displayLink":"www.17jita.com","snippet":"è®¸å·æ•…ä¹¡å‰ä»–è°±ã€é«˜æ¸…ç‰ˆã€‘","htmlSnippet":"è®¸å·<b>æ•…ä¹¡</b>å‰ä»–è°±ã€é«˜æ¸…ç‰ˆã€‘","mime":"image/png","fileFormat":"Image Document","image":{"contextLink":"http://www.17jita.com/jitapu/img/4397.html","height":3507,"width":2479,"byteSize":334669,"thumbnailLink":"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQaLZbcqlPLTAIfplD2PEB5gLh8NJqR3uFib2ipA_aUTchCGgVdh_d1cfs","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"å¤§æµ·å•Šæ•…ä¹¡å‰ä»–è°±_é’Ÿç«‹é£Žæ­Œæ›²å‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°±ä¸‹è½½-å‰ä»–å§","htmlTitle":"å¤§æµ·å•Š<b>æ•…ä¹¡</b>å‰ä»–è°±_é’Ÿç«‹é£Žæ­Œæ›²å‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°±ä¸‹è½½-å‰ä»–å§","link":"http://www.jitaba.cn/upimg/allimg/1211/1_121107024737_1.jpg","displayLink":"www.jitaba.cn","snippet":"ã€Šå¤§æµ·å•Šï¼Œæ•…ä¹¡ã€‹æ˜¯ä¸€é¦–ä¸Šä¸ªä¸–çºª","htmlSnippet":"ã€Šå¤§æµ·å•Šï¼Œ<b>æ•…ä¹¡</b>ã€‹æ˜¯ä¸€é¦–ä¸Šä¸ªä¸–çºª","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/112012/4670.html","height":1155,"width":763,"byteSize":135231,"thumbnailLink":"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSheNFPUUhU92DMDPrHSIphYBxfWE78wwokWFgu5OErK8coRfzZLXgsqbE","thumbnailHeight":150,"thumbnailWidth":99}},{"kind":"customsearch#result","title":"æ•…ä¹¡çš„äº‘å‰ä»–è°±_è´¹ç¿”(æ–‡ç« )å®Œæ•´ç‰ˆå‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°±ä¸‹è½½-å‰ä»–å§","htmlTitle":"<b>æ•…ä¹¡</b>çš„äº‘å‰ä»–è°±_è´¹ç¿”(æ–‡ç« )å®Œæ•´ç‰ˆå‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°±ä¸‹è½½-å‰ä»–å§","link":"http://www.jitaba.cn/upimg/allimg/1301/1_130115040335_1.jpg","displayLink":"www.jitaba.cn","snippet":"æ•…ä¹¡çš„äº‘å‰ä»–è°±-è´¹ç¿”æ–‡ç« æ­Œè°±","htmlSnippet":"<b>æ•…ä¹¡</b>çš„äº‘å‰ä»–è°±-è´¹ç¿”æ–‡ç« æ­Œè°±","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/012013/4838.html","height":1083,"width":766,"byteSize":115107,"thumbnailLink":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSm5SZ3fpLWNheQDHDe8TZ8dXPbSmIl-Ls8APQ25WxxtXnPp_HGRo8Mvio","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"æ•…ä¹¡å‰ä»–è°±_å®Œç¾Žç‰ˆ_è®¸å·æ•…ä¹¡å‰ä»–è°±__å‰ä»–å§","htmlTitle":"<b>æ•…ä¹¡</b>å‰ä»–è°±_å®Œç¾Žç‰ˆ_è®¸å·<b>æ•…ä¹¡</b>å‰ä»–è°±__å‰ä»–å§","link":"http://www.jitaba.cn/upimg/allimg/1309/1_130918012106_1.jpg","displayLink":"www.jitaba.cn","snippet":"æ•…ä¹¡è¿™é¦–æ­Œæ”¶å½•åœ¨è®¸å·2000å¹´å‘è¡Œ","htmlSnippet":"<b>æ•…ä¹¡</b>è¿™é¦–æ­Œæ”¶å½•åœ¨è®¸å·2000å¹´å‘è¡Œ","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/092013/5410.html","height":1082,"width":765,"byteSize":144650,"thumbnailLink":"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRqSGWIHtFI1IxpehxKQe5Fe4UjeNidBbTN5SDOv3Ej7sQUl632JAFwlIve","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"æ•…ä¹¡å‰ä»–è°±_å®Œç¾Žç‰ˆ_è®¸å·æ•…ä¹¡å‰ä»–è°±__å‰ä»–å§","htmlTitle":"<b>æ•…ä¹¡</b>å‰ä»–è°±_å®Œç¾Žç‰ˆ_è®¸å·<b>æ•…ä¹¡</b>å‰ä»–è°±__å‰ä»–å§","link":"http://www.jitaba.cn/upimg/allimg/1309/1_130918012106_3.jpg","displayLink":"www.jitaba.cn","snippet":"æ•…ä¹¡ç®€è°±(è®¸å·)","htmlSnippet":"<b>æ•…ä¹¡</b>ç®€è°±(è®¸å·)","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/092013/5410.html","height":1082,"width":765,"byteSize":114206,"thumbnailLink":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRZ7RJFTzgBPAFVbzR3vT8iDiC9Vm_HgDAYjWxmsMXr4wWUMkSd5FORXJL8","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"æ•…ä¹¡å‰ä»–è°±_å®Œç¾Žç‰ˆ_è®¸å·æ•…ä¹¡å‰ä»–è°±__å‰ä»–å§","htmlTitle":"<b>æ•…ä¹¡</b>å‰ä»–è°±_å®Œç¾Žç‰ˆ_è®¸å·<b>æ•…ä¹¡</b>å‰ä»–è°±__å‰ä»–å§","link":"http://www.jitaba.cn/upimg/allimg/1309/1_130918012106_4.jpg","displayLink":"www.jitaba.cn","snippet":"è®¸å·æ•…ä¹¡å’Œå¼¦è°±","htmlSnippet":"è®¸å·<b>æ•…ä¹¡</b>å’Œå¼¦è°±","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/092013/5410.html","height":1082,"width":765,"byteSize":117753,"thumbnailLink":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTfmeGTDluUJ_1do2Z4WgBiRHGpHUInymRsUjnRxgZuIxsQSVJP0s_nJQ2r","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"æ•…ä¹¡çš„äº‘å‰ä»–è°±_å…­çº¿è°±ç¼–é…(å¼¹å”±è§†é¢‘)_è´¹ç¿”å‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°± ...","htmlTitle":"<b>æ•…ä¹¡</b>çš„äº‘å‰ä»–è°±_å…­çº¿è°±ç¼–é…(å¼¹å”±è§†é¢‘)_è´¹ç¿”å‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°± <b>...</b>","link":"http://www.jitaba.cn/upimg/allimg/1402/1_140201023433_1.jpg","displayLink":"www.jitaba.cn","snippet":"æ•…ä¹¡çš„äº‘å‰ä»–å…­çº¿è°±ï¼Œé‡‡ç”¨Cè°ƒ","htmlSnippet":"<b>æ•…ä¹¡</b>çš„äº‘å‰ä»–å…­çº¿è°±ï¼Œé‡‡ç”¨Cè°ƒ","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/022014/5730.html","height":1081,"width":764,"byteSize":97126,"thumbnailLink":"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQwo_0hDrcoGTqGB-pqOIPoOq5k3ayB2XDYxPsil2Qo2OKUMu333Is78pMZ","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"æ•…ä¹¡çš„äº‘å‰ä»–è°±_å…­çº¿è°±ç¼–é…(å¼¹å”±è§†é¢‘)_è´¹ç¿”å‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°± ...","htmlTitle":"<b>æ•…ä¹¡</b>çš„äº‘å‰ä»–è°±_å…­çº¿è°±ç¼–é…(å¼¹å”±è§†é¢‘)_è´¹ç¿”å‰ä»–è°±-å’Œå¼¦å›¾å…­çº¿è°±-å¼¹å”±è°± <b>...</b>","link":"http://www.jitaba.cn/upimg/allimg/1402/1_140201023434_2.jpg","displayLink":"www.jitaba.cn","snippet":"è´¹ç¿”-æ•…ä¹¡çš„äº‘å‰ä»–å¼¹å”±è°±","htmlSnippet":"è´¹ç¿”-<b>æ•…ä¹¡</b>çš„äº‘å‰ä»–å¼¹å”±è°±","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/jitapu/022014/5730.html","height":1081,"width":764,"byteSize":103759,"thumbnailLink":"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcS66P7DtU09355BuuYdpzhN8RN8RTxUmpf2C3CYt827t4FisL8InlY1ZEfG","thumbnailHeight":150,"thumbnailWidth":106}},{"kind":"customsearch#result","title":"æ•…ä¹¡å‰ä»–è°±æ‰«å¼¦ç‰ˆ_å¸•å°”å“ˆæ_æ•…ä¹¡å‰ä»–å¼¹å”±è°±_æ‰‹å†™å’Œå¼¦è°±_å‰ä»–å§","htmlTitle":"<b>æ•…ä¹¡</b>å‰ä»–è°±æ‰«å¼¦ç‰ˆ_å¸•å°”å“ˆæ_<b>æ•…ä¹¡</b>å‰ä»–å¼¹å”±è°±_æ‰‹å†™å’Œå¼¦è°±_å‰ä»–å§","link":"http://www.jitaba.cn/upimg/allimg/1410/1-14101Z30433.jpg","displayLink":"www.jitaba.cn","snippet":"å¸•å°”å“ˆæã€Šæ•…ä¹¡ã€‹å‰ä»–è°±","htmlSnippet":"å¸•å°”å“ˆæã€Š<b>æ•…ä¹¡</b>ã€‹å‰ä»–è°±","mime":"image/jpeg","image":{"contextLink":"http://www.jitaba.cn/guitar/102014/6314.html","height":1067,"width":800,"byteSize":153181,"thumbnailLink":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTTuK41NRFR9emWsD-2YUPhja0RweQ1QKkdjg5G9cANbu7iTmvQ3rUWU5E","thumbnailHeight":150,"thumbnailWidth":112}},{"kind":"customsearch#result","title":"æ•…ä¹¡å‰ä»–è°±-è®¸å·å‰ä»–è°±-å‰ä»–è°±-å‰ä»–æ›²è°±-http://www.jitapu.com-","htmlTitle":"<b>æ•…ä¹¡</b>å‰ä»–è°±-è®¸å·å‰ä»–è°±-å‰ä»–è°±-å‰ä»–æ›²è°±-http://www.jitapu.com-","link":"http://www.jitapu.com/tabs/tabImg08/297%5C20102108112159.jpg","displayLink":"www.jitapu.com","snippet":"æ•…ä¹¡å‰ä»–è°±- www.jitapu.com","htmlSnippet":"<b>æ•…ä¹¡</b>å‰ä»–è°±- www.jitapu.com","mime":"image/jpeg","image":{"contextLink":"http://www.jitapu.com/tabpages/297/img20102408112404.htm","height":3597,"width":730,"byteSize":194051,"thumbnailLink":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTqRKSqPtwH4y5VMU0Nspi8Mn7i45sBwWylhcwSm8Wb5_gLe22Qp3KBeT1B","thumbnailHeight":150,"thumbnailWidth":30}}]
            // renderResult(debugData);
        }
    })  
};